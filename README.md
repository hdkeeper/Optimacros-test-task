# Тестовое задание для разработчика NodeJS v2 (Оптимакрос)

## Постановка задачи

Разработать клиент-серверное решение с использованием typescript и node.js для хранения и управления базой данных автомобилей различных брендов.

Решение должно состоять из двух приложений: серверного и клиентского. В приложениях должны быть использованы следующие технологии.

Серверное приложение:

1. Node.JS 
2. TypeScript
3. Express или любой express-совместимый web-сервер
4. REST API
5. Методы, которые позволяют добавлять автомобили, удалять, изменять существующие и получать список по брендам с сортировкой (классический CRUD). Опубликовать эти методы в REST API
6. Аутентификация пользователя при подключении к отдельному методу REST API с помощью логина, пароля
7. Авторизация пользователя при подключении по REST API с помощью Authorization: Bearer HTTP заголовка
8. БД MongoDB для персистентного хранения информации об автомобилях. В качестве сервера MongoDB выбрать любой на своё усмотрение, можно публичный MongoDB Atlas
9. Написать несколько юниттестов с использованием jest или mocha для проверки функционала CRUD из п.5, желательно не задействуя REST API. Уровень покрытия выбрать самостоятельно.

Клиентское приложение:

1. Node.JS
2. TypeScript
3. Интерпретатор командной строки. В параметрах обязательно должны быть логин, пароль, действие и аргументы этого действия в любом формате.
4. При запуске из командной строки с параметрами нужно выполнять подключение к Серверу и выполнять REST API операции.
5. Данные, полученные от Сервера выводить в консоль.

Примерная структура "Автомобиль":

- Бренд
- Название
- Год производства
- Цена
- любые дополнительные поля, которые нужны для решения задачи

Как в серверном, так и в клиенском приложениях не рекомендуется использовать большие фреймворки, способные решить за вас значительную часть тестового задания, такие как Nest.JS, Mongoose и т.п.

## Как запустить

Запускаем сервер:
```
cd server
npm install -g typescript ts-node
npm install
npm start
```

(Необязательно) После запуска сервера -- запускаем тесты:
```
cd server
npm install -g jest
npm test
```

Запускаем клиент:
```
cd client
npm install -g typescript ts-node
npm install
ts-node client.ts -u test -p test  <action> [arguments...]
```

## Справочник

| API сервера                 | Действия и аргументы клиента | Описание
| ----------------------------|------------------------------|-------------------------------------------------------------------
| **POST** /auth              | `-u test -p test`            | Авторизация по имени (**-u**) и паролю (**-p**), обязательно
| **GET** /cars?brand=*brand* | `list [brand]`               | Список автомобилей с необязательной фильтрацией по бренду (*brand*)
| **GET** /cars/*id*          | `get <id>`                   | Выбрать автомобиль по *id*
| **PUT** /cars               | `create "{jsonData}"`        | Добавить автомобиль, например:<br>`"{\"brand\":\"Toyota\",\"title\":\"Corolla\",\"year\":2020,\"price\":7000}"`
| **POST** /cars/*id*         | `edit <id> "{jsonData}"`     | Изменить автомобиль по *id*, пример *jsonData*:<br>`"{\"price\":7000}"`
| **DELETE** /cars/*id*       | `delete <id>`                | Удалить автомобиль по *id*
